<!DOCTYPE html>
<html lang="en-us">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="21song">
  
  
  
  <link rel="prev" href="/2019/%E5%8D%95%E9%93%BE%E8%A1%A8/" />
  <link rel="next" href="/2019/%E9%87%87%E7%94%A8pywin32%E6%8E%A7%E5%88%B6%E4%BD%A0%E7%9A%84%E6%89%93%E5%8D%B0%E6%9C%BA/" />
  <link rel="canonical" href="/2019/python-beautifulsoup4/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           bs4 | 宋军亮的技术博客
       
  </title>
  <meta name="title" content="bs4 | 宋军亮的技术博客">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "\/"
    },
    "articleSection" : "posts",
    "name" : "bs4",
    "headline" : "bs4",
    "description" : "Beautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.\n 安装 以下都是在 python2.7 中进行测试的  可以直接使用 pip 安装：\n$ pip install beautifulsoup4 BeautifulSoup 不仅支持 HTML 解析器,还支持一些第三方的解析器，如，lxml，XML，html5lib 但是需要安装相应的库。\n$ pip install lxml\n$ pip install html5lib 2. 开始使用 Beautiful Soup 的功能相当强大，但我们只介绍经常使用的功能。\n简单用法 将一段文档传入 BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.\n   from bs4 import BeautifulSoup\nsoup = BeautifulSoup(\x26rdquo;data\n\x26rdquo;)\nsoup data\n\nsoup(\x26lsquo;p\x26rsquo;) [data\n] 首先传入一个 html 文档，soup 是获得文档的对象。然后,文档被转换成 Unicode ,并且 HTML 的实例都被转换成 Unicode 编码。然后,Beautiful Soup 选择最合适的解析器来解析这段文档,如果手动指定解析器那么 Beautiful Soup 会选择指定的解析器来解析文档。但是一般最好手动指定解析器，并且使用 requests 与 BeautifulSoup 结合使用， requests 是用于爬取网页源码的一个库，此处不再介绍，requests 更多用法请参考 Requests 2.",
    "inLanguage" : "en-us",
    "author" : "Song",
    "creator" : "Song",
    "publisher": "Song",
    "accountablePerson" : "Song",
    "copyrightHolder" : "Song",
    "copyrightYear" : "2019",
    "datePublished": "2019-08-28 00:00:00 \x2b0000 UTC",
    "dateModified" : "2019-08-28 00:00:00 \x2b0000 UTC",
    "url" : "\/2019\/python-beautifulsoup4\/",
    "wordCount" : "364",
    "keywords" : [ "spider", "宋军亮的技术博客"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="/">宋军亮的技术博客</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="/">宋军亮的技术博客</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">Blog</a>
                
                <a class="menu-item" href="/categories/" title="">Categories</a>
                
                <a class="menu-item" href="/tags/" title="">Tags</a>
                
                <a class="menu-item" href="/about/" title="">About</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">bs4</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="/" rel="author">Song</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-08-28 itemprop="datePublished">August 28, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="/categories/spider/"> spider </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<p>Beautiful Soup 是一个可以从 HTML 或 XML 文件中提取数据的 Python 库.它能够通过你喜欢的转换器实现惯用的文档导航,查找,修改文档的方式.Beautiful Soup 会帮你节省数小时甚至数天的工作时间.</p>

<ol>
<li>安装
以下都是在 python2.7 中进行测试的</li>
</ol>

<p>可以直接使用 pip 安装：</p>

<p>$ pip install beautifulsoup4
BeautifulSoup 不仅支持 HTML 解析器,还支持一些第三方的解析器，如，lxml，XML，html5lib 但是需要安装相应的库。</p>

<p>$ pip install lxml</p>

<p>$ pip install html5lib
2. 开始使用
Beautiful Soup 的功能相当强大，但我们只介绍经常使用的功能。</p>

<p>简单用法
将一段文档传入 BeautifulSoup 的构造方法,就能得到一个文档的对象, 可以传入一段字符串或一个文件句柄.</p>

<blockquote>
<blockquote>
<blockquote>
<p>from bs4 import BeautifulSoup</p>

<p>soup = BeautifulSoup(&rdquo;<html><body><p>data</p></body></html>&rdquo;)</p>

<p>soup
<html><body><p>data</p></body></html></p>

<p>soup(&lsquo;p&rsquo;)
[<p>data</p>]
首先传入一个 html 文档，soup 是获得文档的对象。然后,文档被转换成 Unicode ,并且 HTML 的实例都被转换成 Unicode 编码。然后,Beautiful Soup 选择最合适的解析器来解析这段文档,如果手动指定解析器那么 Beautiful Soup 会选择指定的解析器来解析文档。但是一般最好手动指定解析器，并且使用 requests 与 BeautifulSoup 结合使用， requests 是用于爬取网页源码的一个库，此处不再介绍，requests 更多用法请参考 Requests 2.10.0 文档 。</p>
</blockquote>
</blockquote>
</blockquote>

<p>要解析的文档是什么类型: 目前支持, html, xml, 和 html5
指定使用哪种解析器: 目前支持, lxml, html5lib, 和 html.parser</p>

<p>from bs4 import BeautifulSoup
import requests</p>

<p>html = requests.get(‘<a href="http://www.jianshu.com/’).content" rel="nofollow noreferrer" target="_blank">http://www.jianshu.com/’).content</a><br />
soup = BeautifulSoup(html, &lsquo;html.parser&rsquo;, from_encoding=&lsquo;utf-8&rsquo;)
result = soup(&lsquo;div&rsquo;)
对象的种类
Beautiful Soup 将复杂 HTML 文档转换成一个复杂的树形结构,每个节点都是 Python 对象,所有对象可以归纳为 4 种: Tag , NavigableString , BeautifulSoup , Comment .</p>

<p>Tag：通俗点讲就是 HTML 中的一个个标签，像上面的 div，p。每个 Tag 有两个重要的属性 name 和 attrs，name 指标签的名字或者 tag 本身的 name，attrs 通常指一个标签的 class。
NavigableString：获取标签内部的文字，如，soup.p.string。
BeautifulSoup：表示一个文档的全部内容。
Comment：Comment 对象是一个特殊类型的 NavigableString 对象，其输出的内容不包括注释符号.
示例
下面是一个示例，带你了解 Beautiful Soup 的常见用法：</p>

<p>import sys<br />
reload(sys)<br />
sys.setdefaultencoding(&lsquo;utf-8&rsquo;)
from bs4 import BeautifulSoup
import requests</p>

<p>html_doc = &ldquo;&rdquo;&rdquo;
<head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>首页 </title>
</head></p>

<p><body class="output fluid zh cn win reader-day-mode reader-font2 " data-js-module="recommendation" data-locale="zh-CN"></p>

<ul class="article-list thumbnails">

  <li class=have-img>
      <a class="wrap-img" href="/p/49c4728c3ab2"><figure><img src="/images/ring.svg" data-sizes="auto" data-src="http://upload-images.jianshu.io/upload_images/2442470-745c6471c6f8258c.jpg?imageMogr2/auto-orient/strip%7CimageView2/1/w/300/h/300" alt="300" class="lazyload"><figcaption class="image-caption">300</figcaption></figure></a>
    <div>
      <p class="list-top">
        <a class="author-name blue-link" target="_blank" href="/users/0af6b163b687">阿随向前冲</a>
        <em>·</em>
        <span class="time" data-shared-at="2016-07-27T07:03:54+08:00"></span>
      </p>
      <h4 class="title"><a target="_blank" href="/p/49c4728c3ab2"> 只装了这六款软件，工作就高效到有时间逛某宝刷某圈</a></h4>
      <div class="list-footer">
        <a target="_blank" href="/p/49c4728c3ab2">
          阅读 1830
</a>        <a target="_blank" href="/p/49c4728c3ab2#comments">
           · 评论 35
</a>        <span> · 喜欢 95</span>
          <span> · 打赏 1</span>
        
      </div>
    </div>
  </li>
</ul>

<p></body>
&ldquo;&rdquo;&rdquo;</p>

<p>soup = BeautifulSoup(html_doc, &lsquo;html.parser&rsquo;, from_encoding=&lsquo;utf-8&rsquo;)</p>

<h1 id="查找所有有关的节点">查找所有有关的节点</h1>

<p>tags = soup.find<em>all(&lsquo;li&rsquo;, class</em>=&ldquo;have-img&rdquo;)</p>

<p>for tag in tags:
        image = tag.img[&lsquo;src&rsquo;]
        article_user = tag.p.a.get_text()
        article_user_url = tag.p.a[&lsquo;href&rsquo;]<br />
        created = tag.p.span[&lsquo;data-shared-at&rsquo;]<br />
        article_url = tag.h4.a[&lsquo;href&rsquo;]</p>

<pre><code>    # 可以在查找的 tag 下继续使用 find_all()
    tag_span = tag.div.div.find_all('span')

    likes = tag_span[0].get_text(strip=True)
</code></pre>

<p>BeautifulSoup 主要用来遍历子节点及子节点的属性，通过点取属性的方式只能获得当前文档中的第一个 tag，例如，soup.li。如果想要得到所有的<li> 标签,或是通过名字得到比一个 tag 更多的内容的时候,就需要用到 find_all()，find_all() 方法搜索当前 tag 的所有 tag 子节点,并判断是否符合过滤器的条件find_all() 所接受的参数如下：</p>

<p>find_all( name , attrs , recursive , string , **kwargs )
按 name 搜索: name 参数可以查找所有名字为 name 的 tag,字符串对象会被自动忽略掉:</p>

<p>soup.find_all(&ldquo;li&rdquo;)
按 id 搜索: 如果包含一个名字为 id 的参数,搜索时会把该参数当作指定名字 tag 的属性来搜索:</p>

<p>soup.find_all(id=&lsquo;link2&rsquo;)
按 attr 搜索：有些 tag 属性在搜索不能使用,比如 HTML5 中的 data-* 属性，但是可以通过 find_all() 方法的 attrs 参数定义一个字典参数来搜索包含特殊属性的 tag:</p>

<p>data_soup.find<em>all(attrs={&ldquo;data-foo&rdquo;: &ldquo;value&rdquo;})
按 CSS 搜索: 按照 CSS 类名搜索 tag 的功能非常实用,但标识CSS 类名的关键字 class 在 Python 中是保留字,使用 class 做参数会导致语法错误.从 Beautiful Soup 的 4.1.1 版本开始,可以通过 class</em> 参数搜索有指定 CSS 类名的 tag:</p>

<p>soup.find<em>all(&lsquo;li&rsquo;, class</em>=&ldquo;have-img&rdquo;)
string 参数：通过 string 参数可以搜搜文档中的字符串内容.与 name 参数的可选值一样, string 参数接受 字符串 , 正则表达式 , 列表, True 。 看例子:</p>

<p>soup.find_all(&ldquo;a&rdquo;, string=&ldquo;Elsie&rdquo;)
recursive 参数：调用 tag 的 find_all() 方法时,Beautiful Soup 会检索当前 tag 的所有子孙节点,如果只想搜索 tag 的直接子节点,可以使用参数 recursive=False .</p>

<p>soup.find_all(&ldquo;title&rdquo;, recursive=False)
find_all() 几乎是 Beautiful Soup中最常用的搜索方法,也可以使用其简写方法，以下代码等价：</p>

<pre><code>soup.find_all(&quot;a&quot;)
soup(&quot;a&quot;)
</code></pre>

<p>get_text()
如果只想得到 tag 中包含的文本内容,那么可以用 get_text() 方法,这个方法获取到 tag 中包含的所有文版内容包括子孙 tag 中的内容,并将结果作为 Unicode 字符串返回:</p>

<pre><code>tag.p.a.get_text()
</code></pre>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>21song </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=/2019/python-beautifulsoup4/>/2019/python-beautifulsoup4/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="/tags/spider/">
                    #spider</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="/2019/%E5%8D%95%E9%93%BE%E8%A1%A8/" class="prev" rel="prev" title="单链表"><i class="iconfont icon-left"></i>&nbsp;单链表</a>
         
        
        <a href="/2019/%E9%87%87%E7%94%A8pywin32%E6%8E%A7%E5%88%B6%E4%BD%A0%E7%9A%84%E6%89%93%E5%8D%B0%E6%9C%BA/" class="next" rel="next" title="pywin32控制你的打印机">pywin32控制你的打印机&nbsp;<i class="iconfont icon-right"></i></a>
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span itemprop="copyrightYear">2016 - 2019</span>
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="/">21song</a> | </span> 
         

         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
